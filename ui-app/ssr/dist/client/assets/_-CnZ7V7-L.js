import{j as r,R as L}from"./main-BZ76wUXp.js";function a(e,s){return e&&e.value!==void 0?e.value:s}function i(e,s){if(e)return e[s]}function _(e,s){if(e){if(e.value)return e.value;if(e.location?.expression?.startsWith("Theme.")){const t=e.location.expression.replace("Theme.","");return s?.ALL?.[t]}}}function m(e,s){if(!e)return{};const t={};for(const[,o]of Object.entries(e)){const p=o?.resolutions?.ALL;if(p)for(const[c,u]of Object.entries(p)){if(!u)continue;const y=u;if(y.location?.expression?.startsWith("Theme.")){const d=_(y,s);d&&(t[c]=d)}else y.value!==void 0&&(t[c]=String(y.value))}}return t}function N({definition:e,context:s,children:t}){const o=m(e.styleProperties,s.theme),n=a(i(e.properties,"layout"),"SINGLECOLUMNLAYOUT");return r.jsx("div",{className:`comp compGrid _noAnchorGrid _${n}`,id:e.key,style:o,children:t})}function R({definition:e,context:s}){const t=a(i(e.properties,"text"),""),o=m(e.styleProperties,s.theme),n=a(i(e.properties,"textType"),"span"),p=a(i(e.properties,"textContainer"),""),c=n==="h1"?"h1":n==="h2"?"h2":n==="h3"?"h3":n==="h4"?"h4":n==="h5"?"h5":n==="h6"?"h6":n==="p"?"p":"span";return r.jsx(c,{className:`comp compText ${p}`,id:e.key,style:o,children:t})}function P({definition:e,context:s}){const t=a(i(e.properties,"src"),""),o=a(i(e.properties,"alt"),""),n=m(e.styleProperties,s.theme);return t?r.jsx("img",{className:"comp compImage",id:e.key,src:t,alt:o,style:n,loading:"lazy"}):null}function A({definition:e,context:s}){const t=a(i(e.properties,"icon"),""),o=m(e.styleProperties,s.theme);return r.jsx("i",{className:`comp compIcon ${t}`,id:e.key,style:o})}function U({definition:e,context:s,children:t}){const o=a(i(e.properties,"label"),""),n=m(e.styleProperties,s.theme),p=a(i(e.properties,"designType"),""),c=a(i(e.properties,"colorScheme"),"");return r.jsx("button",{className:`comp compButton ${p} ${c}`,id:e.key,style:n,type:"button",children:o||t})}function v({definition:e,context:s,children:t}){const o=a(i(e.properties,"linkPath"),"#"),n=a(i(e.properties,"target"),"_self"),p=m(e.styleProperties,s.theme);return r.jsx("a",{className:"comp compLink",id:e.key,href:o,target:n,style:p,children:t})}function $({definition:e,context:s}){const t=a(i(e.properties,"placeholder"),""),o=m(e.styleProperties,s.theme),n=a(i(e.properties,"designType"),""),p=a(i(e.properties,"colorScheme"),"");return r.jsx("div",{className:`comp compTextBox ${n} ${p}`,id:e.key,style:o,children:r.jsx("input",{type:"text",placeholder:t,disabled:!0,readOnly:!0})})}function b({definition:e,context:s}){const t=a(i(e.properties,"src"),""),o=m(e.styleProperties,s.theme);return t?r.jsx("iframe",{className:"comp compIframe",id:e.key,src:t,style:o,loading:"lazy"}):null}function k({definition:e,context:s,children:t}){const o=m(e.styleProperties,s.theme);return r.jsx("div",{className:"comp compArrayRepeater",id:e.key,style:o,children:t})}function I({definition:e,context:s,children:t}){const o=m(e.styleProperties,s.theme),n=a(i(e.properties,"tabsOrientation"),""),p=a(i(e.properties,"designType"),""),c=a(i(e.properties,"colorScheme"),"");return r.jsx("div",{className:`comp compTabs ${n} ${p} ${c}`,id:e.key,style:o,children:t})}function l({definition:e}){const s=e.type;return r.jsx("div",{className:`comp comp${s}`,id:e.key,"data-ssr-placeholder":"true"})}function E({definition:e,context:s,children:t}){const o=m(e.styleProperties,s.theme);return r.jsx("div",{className:`comp comp${e.type}`,id:e.key,style:o,children:t})}function w({definition:e,context:s,children:t}){const o=m(e.styleProperties,s.theme),n=a(i(e.properties,"layout"),"SINGLECOLUMNLAYOUT");return r.jsx("div",{className:`comp compSectionGrid _noAnchorGrid _${n}`,id:e.key,style:o,children:t})}const M={Grid:N,SectionGrid:w,Text:R,Image:P,Icon:A,Link:v,Iframe:b,Button:U,TextBox:$,ArrayRepeater:k,Tabs:I,Table:l,TableColumns:l,TableColumn:l,TableColumnHeader:l,TableGrid:l,TableEmptyGrid:l,TablePreviewGrid:l,TableDynamicColumn:l,TableDynamicColumns:l,Chart:l,FileUpload:l,KIRunEditor:l,TextEditor:l,SchemaBuilder:l,ThemeEditor:l,FormEditor:l,PageEditor:l,FileSelector:l,ColorPicker:l,Calendar:l,Video:l,Audio:l,MarkdownEditor:l};function Y(e){return M[e]||E}function G(e,s,t,o=0){if(!e||o>50)return[];const{componentDefinition:n}=s;return Object.entries(e).filter(([,c])=>c).map(([c])=>c).filter(c=>n[c]).sort((c,u)=>{const y=n[c]?.displayOrder??0,d=n[u]?.displayOrder??0;return y!==d?y-d:c.localeCompare(u)}).map(c=>{const u=n[c];return f(u,s,t,o+1)})}function f(e,s,t,o=0){if(!e||o>50)return null;const n=Y(e.type),p=e.children?G(e.children,s,t,o):null;return r.jsx(n,{definition:e,pageDefinition:s,context:t,children:p},e.key)}function F({pageDefinition:e,application:s,theme:t}){const{componentDefinition:o,rootComponent:n}=e,p={pageName:e.name,appCode:s.appCode,clientCode:s.clientCode,theme:t,application:s},c=o[n];if(!c)return r.jsx("div",{className:"comp compPage",children:r.jsx("p",{children:"Page structure error: root component not found"})});const u=f(c,e,p,0);return r.jsx("div",{className:"comp compPage",children:u})}var x={};const D=`
	.comp { display: block; box-sizing: border-box; }
	.compPage { min-height: 100vh; }
	.compGrid { display: flex; flex-direction: column; }
	.compMessages { position: fixed; top: 10px; right: 10px; z-index: 10000; }
	._noAnchorGrid { }
	._ROWLAYOUT { flex-direction: row; }
	._SINGLECOLUMNLAYOUT { flex-direction: column; }
	._ROWCOLUMNLAYOUT { flex-direction: column; }
	._TWOCOLUMNSLAYOUT { display: grid; grid-template-columns: 1fr; }
	._THREECOLUMNSLAYOUT { display: grid; grid-template-columns: 1fr; }
	._FOURCOLUMNSLAYOUT { display: grid; grid-template-columns: 1fr; }
	._FIVECOLUMNSLAYOUT { display: grid; grid-template-columns: 1fr; }
	@media screen and (min-width: 641px) {
		._TWOCOLUMNSLAYOUT, ._THREECOLUMNSLAYOUT, ._FOURCOLUMNSLAYOUT, ._FIVECOLUMNSLAYOUT {
			grid-template-columns: 1fr 1fr;
		}
	}
	@media screen and (min-width: 1025px) {
		._TWOCOLUMNSLAYOUT { grid-template-columns: 1fr 1fr; }
		._THREECOLUMNSLAYOUT { grid-template-columns: 1fr 1fr 1fr; }
		._FOURCOLUMNSLAYOUT { grid-template-columns: 1fr 1fr 1fr 1fr; }
		._FIVECOLUMNSLAYOUT { grid-template-columns: 1fr 1fr 1fr 1fr 1fr; }
		._ROWCOLUMNLAYOUT { flex-direction: row; }
	}
`;function B(e){const s=new Set;if(e?.componentDefinition)for(const t of Object.values(e.componentDefinition))t?.type&&s.add(t.type);return Array.from(s)}function H(){const e=L.useLoaderData();if(!e||"error"in e)return r.jsxs("div",{id:"app",children:[r.jsxs("div",{className:"comp compPage",children:[r.jsx("h1",{children:"Page Not Found"}),r.jsx("p",{children:"The requested page could not be found."})]}),r.jsx("div",{className:"comp compMessages"}),r.jsx("div",{id:"_rendered","data-used-components":""})]});const{application:s,page:t,theme:o,styles:n,codes:p,pageName:c}=e,u=B(t),y={application:s,pageDefinition:{[c]:t},theme:o,styles:n,urlDetails:{pageName:c,appCode:p.appCode,clientCode:p.clientCode}},d=x.CDN_HOST_NAME||"",O=x.CDN_STRIP_API_PREFIX||"true",C=x.CDN_REPLACE_PLUS==="true",S=x.CDN_RESIZE_OPTIONS_TYPE||"",h=d?`https://${d}/js/dist/`:"/js/dist/",j=s?.properties?.links||{};return r.jsxs(r.Fragment,{children:[d&&r.jsxs(r.Fragment,{children:[r.jsx("link",{rel:"dns-prefetch",href:`https://${d}`}),r.jsx("link",{rel:"preconnect",href:`https://${d}`,crossOrigin:"anonymous"})]}),r.jsx("link",{rel:"preload",href:`${h}vendors.js`,as:"script"}),r.jsx("link",{rel:"preload",href:`${h}index.js`,as:"script"}),r.jsx("link",{rel:"preload",href:`${h}css/App.css`,as:"style"}),r.jsx("style",{id:"criticalCss",dangerouslySetInnerHTML:{__html:D}}),r.jsx("link",{rel:"stylesheet",href:`${h}css/App.css`}),Object.entries(j).map(([g,T])=>r.jsx("link",{rel:T.rel||"stylesheet",href:T.href},g)),r.jsx("script",{dangerouslySetInnerHTML:{__html:`
						window.__APP_BOOTSTRAP__ = ${JSON.stringify(y)};
						window.domainAppCode = '${p.appCode}';
						window.domainClientCode = '${p.clientCode}';
						${d?`window.cdnPrefix = '${d}';`:""}
						${d?`window.cdnStripAPIPrefix = ${O};`:""}
						${d?`window.cdnReplacePlus = ${C};`:""}
						${d&&S?`window.cdnResizeOptionsType = '${S}';`:""}
						// When no CDN, use local path prefix for styleProperties and css files
						// This ensures requests go through /js/dist/ which Nginx routes to gateway
						window.__LOCAL_STATIC_PREFIX__ = ${d?"null":"'/js/dist'"};
					`}}),r.jsxs("div",{id:"app",children:[r.jsx(F,{pageDefinition:t,application:s,theme:o||void 0,styles:n}),r.jsx("div",{className:"comp compMessages"}),r.jsx("div",{id:"_rendered","data-used-components":u.join(",")})]}),r.jsx("script",{src:`${h}vendors.js`,defer:!0}),r.jsx("script",{src:`${h}index.js`,defer:!0})]})}export{H as component};
